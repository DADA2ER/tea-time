<!DOCTYPE html>
<html lang="he">
<head>
  <meta charset="UTF-8">
  <title>טיימר תה</title>
  <style>
    body { font-family: Arial; background:#fff; color:#000; text-align:center; padding:20px; }
    h1 { margin-bottom:10px; }
    select, button { font-size:16px; padding:10px; margin:10px; }
    .timer-block { margin-top:20px; }
    .step { margin:10px 0; }
  </style>
</head>
<body>
  <h1>טיימר תה גונג פו</h1>
  <label for="teaType">בחר סוג תה:</label>
  <select id="teaType" onchange="loadSteps()">
    <option value="shu">שו פואר</option>
    <option value="dahongpao">דה הונג פאו</option>
    <option value="tieguanyin">טיי גואן יין</option>
  </select>
  <div class="timer-block" id="stepsContainer"></div>
  <script>
    const teaPresets = {
      shu: [10,15,20,25],
      dahongpao: [5,10,15,20],
      tieguanyin: [5,20,25,30]
    };
    function loadSteps() {
      const type = document.getElementById("teaType").value;
      const steps = teaPresets[type];
      const container = document.getElementById("stepsContainer");
      container.innerHTML = "";
      steps.forEach((sec, i) => {
        const div = document.createElement("div");
        div.className = "step";
        const btn = document.createElement("button");
        btn.textContent = `התחל חליטה ${i + 1} (${sec} שניות)`;
        btn.onclick = () => startTimer(sec, btn);
        div.appendChild(btn);
        container.appendChild(div);
      });
    }
    function startTimer(duration, btn) {
      let remaining = duration;
      const original = btn.textContent;
      btn.disabled = true;
      btn.textContent = `זמן נותר: ${remaining}`;
      const i = setInterval(() => {
        remaining--;
        btn.textContent = `זמן נותר: ${remaining}`;
        if (remaining <= 0) {
          clearInterval(i);
          btn.textContent = "✔️ סיום!";
          setTimeout(() => {
            btn.textContent = original;
            btn.disabled = false;
          }, 3000);
          new Audio('https://actions.google.com/sounds/v1/alarms/alarm_clock.ogg').play();
        }
      }, 1000);
    }
    loadSteps();
  </script>
</body>
</html>
